# YouTube Manager Mini App

Мини-приложение Telegram для управления контентом YouTube через API с поддержкой русского и английского языков.

## Особенности

**Безопасность данных**: API-ключи пользователей хранятся в зашифрованном виде с использованием алгоритма AES-256, что обеспечивает максимальную защиту конфиденциальных данных. Каждый ключ шифруется с уникальным вектором инициализации (IV), что делает невозможным расшифровку без доступа к базе данных.

**Многоязычность**: Приложение поддерживает русский и английский интерфейсы с возможностью переключения языка в реальном времени. Настройки языка сохраняются для каждого пользователя индивидуально.

**Современный дизайн**: Темно-красная цветовая схема создает стильный и профессиональный внешний вид. Интерфейс полностью адаптивен и корректно отображается на всех типах устройств от мобильных телефонов до настольных компьютеров.

## Основные функции

### Управление API-ключами

Приложение предоставляет удобный интерфейс для подключения YouTube API ключа. При добавлении ключа система автоматически проверяет его валидность, отправляя тестовый запрос к YouTube API. Пользователь может в любой момент удалить или переподключить свой ключ через интуитивно понятный интерфейс.

### Поиск контента

Функция поиска позволяет находить видео, каналы и плейлисты по ключевым словам. Доступны расширенные фильтры для уточнения результатов: тип контента (видео, канал, плейлист), дата загрузки, продолжительность видео. Результаты можно сортировать по релевантности, дате публикации, рейтингу или количеству просмотров.

### Просмотр популярных видео

Страница видео отображает актуальные популярные ролики с YouTube. Для каждого видео показывается миниатюра, название, автор и статистика (просмотры, лайки, комментарии). Пользователь может скопировать ссылку на видео для последующего скачивания через бот.

### Работа с плейлистами

Функция позволяет просматривать содержимое любого публичного плейлиста YouTube по его ID. Отображается полный список видео с порядковыми номерами, миниатюрами и названиями. Каждое видео из плейлиста можно скопировать для скачивания.

### Информация о каналах

Страница каналов предоставляет подробную информацию о любом YouTube канале: баннер, аватар, название, описание, статистику подписчиков, количество видео и общее число просмотров. Данные загружаются напрямую через YouTube Data API.

### Интеграция с ботом

Все найденные видео, плейлисты и каналы содержат кнопки для копирования ссылок. Скопированные ссылки можно отправить в Telegram-бот для скачивания контента. Это обеспечивает бесшовную интеграцию между мини-приложением и основным функционалом бота.

## Технологический стек

**Frontend**: React 19 с использованием TypeScript для типобезопасности, Tailwind CSS 4 для стилизации, shadcn/ui для готовых UI-компонентов, tRPC для типизированного взаимодействия с backend.

**Backend**: Express 4 в качестве веб-сервера, tRPC 11 для API, Drizzle ORM для работы с базой данных MySQL/TiDB, встроенная система аутентификации через Manus OAuth.

**Безопасность**: Шифрование API-ключей с использованием Node.js crypto модуля (AES-256-CBC), защищенное хранение сессий, валидация всех входных данных через Zod схемы.

## Установка и запуск

### Предварительные требования

Для работы приложения необходимы Node.js версии 22 или выше и менеджер пакетов pnpm. База данных MySQL или TiDB должна быть доступна для подключения.

### Установка зависимостей

```bash
pnpm install
```

### Настройка базы данных

Применение миграций для создания необходимых таблиц:

```bash
pnpm db:push
```

### Запуск в режиме разработки

```bash
pnpm dev
```

Приложение будет доступно по адресу http://localhost:3000

### Сборка для production

```bash
pnpm build
pnpm start
```

## Структура проекта

```
client/
  src/
    pages/          # Страницы приложения
      Home.tsx      # Главная страница с подключением API
      Search.tsx    # Страница поиска
      Videos.tsx    # Популярные видео
      Playlists.tsx # Просмотр плейлистов
      Channels.tsx  # Информация о каналах
    hooks/
      useTranslation.ts  # Хук для работы с переводами
    const.ts        # Константы и переводы
    
server/
  routers.ts        # tRPC роутеры
  db.ts             # Функции работы с БД
  youtube.ts        # YouTube API клиент
  encryption.ts     # Шифрование/дешифрование
  youtube.test.ts   # Unit-тесты
  
drizzle/
  schema.ts         # Схема базы данных
```

## Использование

### Подключение API-ключа

После входа в приложение пользователь видит форму для ввода YouTube API ключа. Ключ можно получить в Google Cloud Console, создав проект и включив YouTube Data API v3. После ввода ключа система автоматически проверяет его корректность.

### Поиск контента

На странице поиска можно ввести запрос в поисковую строку, выбрать тип контента (видео, канал или плейлист) и метод сортировки. Результаты отображаются в виде карточек с миниатюрами и основной информацией.

### Копирование ссылок

Каждая карточка видео, канала или плейлиста содержит кнопку "Copy Link". После нажатия ссылка копируется в буфер обмена и готова для отправки в Telegram-бот для скачивания.

### Смена языка

Переключение между русским и английским языками доступно через кнопку в правом верхнем углу главной страницы. Выбранный язык сохраняется в настройках пользователя.

## Тестирование

Проект включает unit-тесты для проверки основного функционала:

```bash
pnpm test
```

Тесты покрывают управление API-ключами, настройки языка и валидацию входных данных.

## Ограничения

Некоторые функции YouTube API требуют OAuth2 аутентификации и недоступны при использовании только API-ключа. К таким функциям относятся: создание и изменение комментариев, лайки и дизлайки видео, управление плейлистами пользователя, подписки на каналы. Текущая версия приложения поддерживает только операции чтения данных.

## Безопасность

API-ключи никогда не передаются на клиентскую сторону и хранятся только на сервере в зашифрованном виде. Все запросы к YouTube API выполняются через backend, что предотвращает утечку ключей. Рекомендуется использовать API-ключи с ограничениями по IP-адресам и квотам в Google Cloud Console.

## Разработка

Проект использует современные практики разработки: TypeScript для типобезопасности, ESLint для проверки кода, Vitest для тестирования, Hot Module Replacement для быстрой разработки.

## Лицензия

Проект разработан для использования в рамках Telegram мини-приложения для скачивания видео.

---

**Разработано с использованием Manus AI**
